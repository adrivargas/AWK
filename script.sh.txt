# Script para análisis y generación de informes de acceso a un servidor web

# Función para analizar los logs del servidor web
analizar_logs() {
    echo "Analizando logs del servidor web..."
    LOG_FILE="/var/log/apache2/access.log"

    # Extraer direcciones IP más activas
    echo "IPs más activas:"
    awk '{print $1}' $LOG_FILE | sort | uniq -c | sort -nr | head -n 5

    # Extraer rutas más visitadas
    echo "Rutas más visitadas:"
    awk '{print $7}' $LOG_FILE | sort | uniq -c | sort -nr | head -n 5
}

# Función para generar informes
generar_informes() {
    echo "Generando informes de acceso al servidor web..."
    # Implementar más análisis y generación de informes según sea necesario
}

# Función para monitorear acceso en tiempo real
monitorear_acceso() {
    echo "Monitoreando acceso en tiempo real con htop..."
    htop
}

# Función para bloquear IPs maliciosas
bloquear_ips() {
    echo "Buscando IPs maliciosas y bloqueando con iptables..."
    # Implementar lógica para identificar y bloquear IPs maliciosas
}

# Función principal del script
main() {
    clear
    echo "Bienvenido al sistema de análisis y generación de informes
de acceso a un servidor web."
    echo "----------------------------------------------"

    analizar_logs
    generar_informes
    monitorear_acceso
    bloquear_ips

    echo "----------------------------------------------"
    echo "Fin del script."
}
